<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ë–∞–π—Ç –ö–æ–¥–∞: –ú—É–∑—ã–∫–∞ –ê–¥–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        
        :root {
            --tg-bg: #17212b;
            --tg-header: #1e2b36;
            --tg-message: #1e2b36;
            --tg-own: #2b5278;
            --tg-border: #2b3a45;
            --tg-text: #fff;
            --tg-secondary: #8e9ca8;
            --tg-accent: #6ab2f2;
        }
        
        body {
            background: var(--tg-bg);
            color: var(--tg-text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: all 0.3s;
        }
        
        /* ===== –ê–î–°–ö–ò–ï –≠–§–§–ï–ö–¢–´ ===== */
        body.glitch-mode {
            --tg-bg: #0a0a0a;
            --tg-header: #1a1a1a;
            --tg-message: #1a1a1a;
            --tg-border: #ff0000;
            --tg-accent: #ff6b6b;
            animation: screenGlitch 0.08s infinite;
        }
        
        @keyframes screenGlitch {
            0% { transform: translate(0) skew(0deg); filter: hue-rotate(0deg); }
            10% { transform: translate(-5px, 4px) skew(3deg); filter: hue-rotate(90deg); }
            20% { transform: translate(5px, -4px) skew(-3deg); filter: hue-rotate(180deg); }
            30% { transform: translate(-4px, 5px) skew(4deg); filter: hue-rotate(270deg); }
            40% { transform: translate(4px, -5px) skew(-4deg); filter: hue-rotate(360deg); }
            50% { transform: translate(-6px, 3px) skew(2deg); filter: hue-rotate(45deg); }
            60% { transform: translate(6px, -3px) skew(-2deg); filter: hue-rotate(135deg); }
            70% { transform: translate(-3px, 6px) skew(5deg); filter: hue-rotate(225deg); }
            80% { transform: translate(3px, -6px) skew(-5deg); filter: hue-rotate(315deg); }
            90% { transform: translate(0) skew(0deg); filter: hue-rotate(0deg); }
            100% { transform: translate(0) skew(0deg); filter: hue-rotate(0deg); }
        }
        
        body.blood-mode {
            --tg-bg: #2a0a0a;
            --tg-header: #3a1a1a;
            --tg-message: #3a1a1a;
            --tg-border: #8b0000;
            --tg-accent: #ff3333;
            filter: drop-shadow(0 0 20px #ff0000) brightness(0.8);
            animation: bloodPulse 1.5s infinite;
        }
        
        @keyframes bloodPulse {
            0%, 100% { filter: drop-shadow(0 0 20px #ff0000) brightness(0.8); }
            50% { filter: drop-shadow(0 0 40px #ff0000) brightness(1.2); }
        }
        
        body.static-mode {
            animation: staticNoise 0.01s infinite;
        }
        
        @keyframes staticNoise {
            0% { filter: brightness(1) contrast(1); background-position: 0 0; }
            10% { filter: brightness(2) contrast(3) hue-rotate(90deg); background-position: 10% 5%; }
            20% { filter: brightness(0.4) contrast(4) hue-rotate(180deg); background-position: 20% 10%; }
            30% { filter: brightness(2.5) contrast(0.6) hue-rotate(270deg); background-position: 30% 15%; }
            40% { filter: brightness(0.3) contrast(5) hue-rotate(360deg); background-position: 40% 20%; }
            50% { filter: brightness(2.2) contrast(2) hue-rotate(45deg); background-position: 50% 25%; }
            60% { filter: brightness(0.5) contrast(3.5) hue-rotate(135deg); background-position: 60% 30%; }
            70% { filter: brightness(1.8) contrast(1.5) hue-rotate(225deg); background-position: 70% 35%; }
            80% { filter: brightness(3) contrast(0.5) hue-rotate(315deg); background-position: 80% 40%; }
            90% { filter: brightness(1) contrast(1); background-position: 90% 45%; }
            100% { filter: brightness(1) contrast(1); background-position: 0 0; }
        }
        
        body.vhs-mode {
            animation: vhsDistortion 1s infinite;
        }
        
        @keyframes vhsDistortion {
            0%, 100% { transform: skew(0deg); filter: brightness(1); }
            25% { transform: skew(-3deg) scaleX(1.03); filter: brightness(1.4) saturate(2); }
            50% { transform: skew(3deg) scaleX(0.97); filter: brightness(0.6) saturate(0.3); }
            75% { transform: skew(-2deg); filter: brightness(1.3); }
        }
        
        body.scanlines-mode::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0,0,0,0.2) 0px,
                rgba(0,0,0,0.2) 1px,
                rgba(255,255,255,0.05) 1px,
                rgba(255,255,255,0.05) 2px
            );
            pointer-events: none;
            z-index: 9998;
            animation: scanlines 4s linear infinite;
        }
        
        @keyframes scanlines {
            from { transform: translateY(0); }
            to { transform: translateY(2px); }
        }
        
        body.white-flash {
            background: white !important;
            transition: background 0.05s;
        }
        
        body.invert-mode {
            filter: invert(1) hue-rotate(180deg);
        }
        
        body.blur-mode {
            filter: blur(5px);
        }
        
        body.xray-mode {
            filter: invert(0.8) hue-rotate(90deg) contrast(3) brightness(1.3);
        }
        
        body.crt-mode {
            animation: crtFlicker 0.05s infinite;
        }
        
        @keyframes crtFlicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.95; }
        }
        
        body.distortion-mode {
            animation: distortion 0.1s infinite;
        }
        
        @keyframes distortion {
            0%, 100% { transform: perspective(500px) rotateX(0deg); }
            50% { transform: perspective(500px) rotateX(3deg) rotateY(2deg); }
        }
        
        body.hell-mode {
            --tg-bg: #1a0000;
            --tg-header: #2a0000;
            --tg-message: #2a0000;
            --tg-border: #ff0000;
            --tg-accent: #ff6666;
            filter: drop-shadow(0 0 30px #ff0000);
            animation: hellFire 1.5s infinite;
        }
        
        @keyframes hellFire {
            0%, 100% { filter: drop-shadow(0 0 30px #ff0000); }
            50% { filter: drop-shadow(0 0 60px #ff0000) brightness(1.5); }
        }
        
        /* ===== –ß–ï–õ–û–í–ï–ö ===== */
        .human-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 20000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 1s;
            pointer-events: none;
        }
        
        .human-overlay.visible {
            opacity: 1;
        }
        
        .human-figure {
            font-size: min(50vh, 50vw);
            line-height: 1;
            color: black;
            animation: humanBreathing 2s infinite;
        }
        
        @keyframes humanBreathing {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.9; }
        }
        
        .human-text {
            position: absolute;
            bottom: 20%;
            left: 0;
            width: 100%;
            text-align: center;
            color: black;
            font-size: 24px;
            font-weight: bold;
            animation: textAppear 3s infinite;
        }
        
        @keyframes textAppear {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* ===== –®–ê–ü–ö–ê ===== */
        .tg-header {
            background: var(--tg-header);
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--tg-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .back-btn {
            color: var(--tg-accent);
            font-size: 24px;
            line-height: 1;
            text-decoration: none;
            cursor: pointer;
        }
        
        .header-title {
            font-weight: 600;
            font-size: 17px;
            flex: 1;
        }
        
        .menu-btn {
            color: var(--tg-accent);
            font-size: 20px;
            cursor: pointer;
            margin-right: 10px;
        }
        
        .cycle-counter {
            background: #2a1a2a;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            color: #ff66ff;
            margin-right: 10px;
            animation: cycleGlow 2s infinite;
        }
        
        @keyframes cycleGlow {
            0%, 100% { box-shadow: 0 0 5px #ff00ff; }
            50% { box-shadow: 0 0 20px #ff00ff; }
        }
        
        .fear-level {
            background: #2a1a1a;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            color: #ff6666;
            animation: fearPulse 1s infinite;
        }
        
        @keyframes fearPulse {
            0%, 100% { box-shadow: 0 0 5px #ff0000; }
            50% { box-shadow: 0 0 30px #ff0000; }
        }
        
        .menu-panel {
            position: fixed;
            top: 0;
            right: -100%;
            width: 80%;
            height: 100%;
            background: var(--tg-header);
            border-left: 2px solid var(--tg-border);
            transition: right 0.3s;
            z-index: 1000;
            padding: 60px 20px 20px;
            overflow-y: auto;
        }
        
        .menu-panel.open {
            right: 0;
        }
        
        .menu-item {
            padding: 16px;
            border-bottom: 1px solid var(--tg-border);
            cursor: pointer;
            font-size: 16px;
        }
        
        .menu-item:hover {
            background: var(--tg-border);
        }
        
        .members-bar {
            display: flex;
            gap: 16px;
            padding: 12px 16px;
            background: var(--tg-header);
            border-bottom: 1px solid var(--tg-border);
            overflow-x: auto;
        }
        
        .member {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            min-width: 60px;
            opacity: 1;
            transition: all 0.5s;
            position: relative;
        }
        
        .member.dead {
            opacity: 0.1;
            filter: grayscale(100%) blur(3px);
            pointer-events: none;
        }
        
        .member.dead::after {
            content: 'üíÄ';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: #ff0000;
            animation: deadPulse 0.8s infinite;
        }
        
        @keyframes deadPulse {
            0%, 100% { opacity: 0.5; transform: translateX(-50%) scale(1); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.5); }
        }
        
        .member.possessed {
            animation: possessedMember 0.3s infinite;
        }
        
        @keyframes possessedMember {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(180deg) brightness(2); }
        }
        
        .avatar {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            background: var(--tg-border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            transition: all 0.3s;
            position: relative;
        }
        
        .avatar.dead-avatar {
            background: #2a2a2a;
            filter: grayscale(100%);
        }
        
        .avatar.possessed-avatar {
            animation: possessedAvatar 0.2s infinite;
        }
        
        @keyframes possessedAvatar {
            0%, 100% { transform: scale(1); filter: hue-rotate(0deg); }
            50% { transform: scale(1.2); filter: hue-rotate(180deg) brightness(2); }
        }
        
        .member-name {
            font-size: 12px;
            color: var(--tg-secondary);
        }
        
        .dead .member-name {
            color: #660000;
            text-decoration: line-through;
        }
        
        .chat-container {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
            min-height: 60vh;
            position: relative;
        }
        
        .message {
            display: flex;
            gap: 8px;
            max-width: 85%;
            opacity: 1;
            transition: opacity 0.2s, transform 0.2s, filter 0.2s;
            animation: messageAppear 0.2s;
            position: relative;
        }
        
        @keyframes messageAppear {
            from { opacity: 0; transform: translateY(20px) scale(0.8); filter: blur(10px); }
            to { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
        }
        
        .message.system-message {
            animation: systemAppear 0.1s, systemGlitch 0.2s infinite;
        }
        
        @keyframes systemAppear {
            from { opacity: 0; transform: scale(0.2) rotate(15deg); filter: blur(20px); }
            to { opacity: 1; transform: scale(1) rotate(0); filter: blur(0); }
        }
        
        @keyframes systemGlitch {
            0%, 100% { transform: translate(0) skew(0deg); }
            25% { transform: translate(-4px, 4px) skew(3deg); }
            50% { transform: translate(4px, -4px) skew(-3deg); }
            75% { transform: translate(-3px, -3px) skew(2deg); }
        }
        
        .message.final-message {
            animation: finalMessage 0.15s infinite;
            border-left: 8px solid #ff0000;
            background: linear-gradient(45deg, #1a0000, #2a0000);
        }
        
        @keyframes finalMessage {
            0%, 100% { transform: translate(0) scale(1); filter: brightness(1); }
            25% { transform: translate(-5px, 3px) scale(1.03); filter: brightness(1.5); }
            75% { transform: translate(5px, -3px) scale(0.97); filter: brightness(0.5); }
        }
        
        .message.ghost-message {
            animation: ghostMessage 2s infinite;
            opacity: 0.3;
        }
        
        @keyframes ghostMessage {
            0%, 100% { opacity: 0.2; transform: translateY(0); }
            50% { opacity: 0.6; transform: translateY(-10px); }
        }
        
        .message.deleting {
            animation: deleteMessage 0.25s forwards;
        }
        
        @keyframes deleteMessage {
            0% { opacity: 1; transform: scale(1) rotate(0); filter: blur(0); }
            50% { opacity: 0.3; transform: scale(0.3) rotate(20deg); filter: blur(20px); }
            100% { opacity: 0; transform: scale(0) rotate(40deg); filter: blur(40px); display: none; }
        }
        
        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--tg-border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
            transition: all 0.3s;
        }
        
        .message:hover .message-avatar {
            transform: scale(1.2);
            filter: brightness(1.5);
        }
        
        .message-content {
            background: var(--tg-message);
            padding: 8px 12px;
            border-radius: 12px 12px 12px 4px;
            word-break: break-word;
            transition: all 0.3s;
        }
        
        .message:hover .message-content {
            background: var(--tg-border);
            transform: scale(1.03);
        }
        
        .own-message .message-content {
            background: var(--tg-own);
            border-radius: 12px 12px 4px 12px;
        }
        
        .own-message:hover .message-content {
            background: #2a6a9e;
        }
        
        .message-name {
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 4px;
            color: var(--tg-accent);
        }
        
        .message-text {
            font-size: 15px;
            line-height: 1.4;
            transition: all 0.3s;
        }
        
        .message:hover .message-text {
            letter-spacing: 1px;
        }
        
        .message-time {
            font-size: 11px;
            color: var(--tg-secondary);
            margin-top: 4px;
            text-align: right;
        }
        
        .script-block {
            background: #0f1a24;
            padding: 12px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 8px 0;
            border-left: 3px solid var(--tg-accent);
            animation: scriptAppear 0.5s;
            transition: all 0.3s;
        }
        
        .script-block:hover {
            transform: scale(1.03);
            border-left-color: #ff0000;
            box-shadow: 0 0 30px #ff0000;
        }
        
        @keyframes scriptAppear {
            from { opacity: 0; transform: translateX(-40px) rotate(-10deg); }
            to { opacity: 1; transform: translateX(0) rotate(0); }
        }
        
        .script-code {
            color: #aaffaa;
            font-size: 13px;
            line-height: 1.8;
        }
        
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 12px 16px;
            background: var(--tg-message);
            border-radius: 20px;
            width: fit-content;
            margin-left: 52px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--tg-secondary);
            border-radius: 50%;
            animation: typing 1s infinite;
        }
        
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; transform: translateY(0); }
            30% { opacity: 1; transform: translateY(-8px); }
        }
        
        .input-area {
            padding: 16px;
            background: var(--tg-header);
            border-top: 2px solid var(--tg-border);
            position: sticky;
            bottom: 0;
        }
        
        .button {
            background: var(--tg-accent);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 16px;
            width: 100%;
            margin-bottom: 8px;
            cursor: pointer;
            transition: 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .button:hover::before {
            left: 100%;
        }
        
        .button:active {
            transform: scale(0.95);
        }
        
        .button.secondary {
            background: var(--tg-border);
        }
        
        .button.danger {
            background: #8b0000;
        }
        
        .button.script-choice {
            background: #4a2a4a;
        }
        
        .button.final-button {
            background: #ff0000;
            animation: finalButton 0.5s infinite;
        }
        
        @keyframes finalButton {
            0%, 100% { transform: scale(1); box-shadow: 0 0 10px #ff0000; }
            50% { transform: scale(1.1); box-shadow: 0 0 40px #ff0000; }
        }
        
        .button.disabled {
            opacity: 0.2;
            pointer-events: none;
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 8px;
        }
        
        .bsod {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0000aa;
            color: white;
            font-family: 'Courier New', monospace;
            padding: 20px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            animation: bsodFlicker 1s infinite;
        }
        
        @keyframes bsodFlicker {
            0%, 100% { opacity: 1; background: #0000aa; }
            50% { opacity: 0.9; background: #000088; }
        }
        
        .bsod pre {
            font-size: 16px;
            line-height: 2;
            white-space: pre-wrap;
            text-align: center;
        }
        
        .bsod.hidden {
            display: none;
        }
        
        .shadow-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(255,0,0,0.6);
            font-size: 32px;
            text-align: center;
            pointer-events: none;
            z-index: 9999;
            text-shadow: 0 0 40px #ff0000;
            animation: shadowFloat 2s infinite;
        }
        
        @keyframes shadowFloat {
            0%, 100% { opacity: 0.2; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.9; transform: translate(-50%, -50%) scale(1.4); }
        }
        
        .blood-rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9997;
        }
        
        .blood-drop {
            position: absolute;
            top: -10px;
            background: rgba(139, 0, 0, 0.5);
            width: 2px;
            height: 30px;
            animation: bloodFall 0.8s linear infinite;
        }
        
        @keyframes bloodFall {
            from { top: -30px; }
            to { top: 100%; }
        }
        
        .demon-text {
            position: fixed;
            bottom: 10px;
            right: 10px;
            color: rgba(255,0,0,0.2);
            font-size: 14px;
            z-index: 9996;
            animation: demonFloat 3s infinite;
        }
        
        @keyframes demonFloat {
            0%, 100% { opacity: 0.1; transform: translate(0); }
            50% { opacity: 0.4; transform: translate(-8px, -8px); }
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="tg-header">
        <div class="back-btn" onclick="if(window.Telegram?.WebApp) window.Telegram.WebApp.close()">‚Üê</div>
        <div class="header-title" id="headerTitle">–ë–∞–π—Ç –ö–æ–¥–∞ ‚Ä¢ –¶–∏–∫–ª 1</div>
        <div class="cycle-counter" id="cycleCounter">üîÑ 1</div>
        <div class="menu-btn" onclick="toggleMenu()">‚öôÔ∏è</div>
        <div class="fear-level" id="fearLevel">üò® 0%</div>
    </div>
    
    <div class="menu-panel" id="menuPanel">
        <div class="menu-item" onclick="toggleMenu()">‚úñÔ∏è –ó–∞–∫—Ä—ã—Ç—å</div>
        <div class="menu-item" onclick="deleteAllData()">üóëÔ∏è –°–±—Ä–æ—Å –∏–≥—Ä—ã</div>
    </div>
    
    <div class="members-bar" id="membersBar">
        <div class="member" id="memberShlypa" onclick="showProfile('shlypa')">
            <div class="avatar" id="avatarShlypa">üò∫</div>
            <span class="member-name">–®–ª—ë–ø–∞</span>
        </div>
        <div class="member" id="memberBingus" onclick="showProfile('bingus')">
            <div class="avatar" id="avatarBingus">üòø</div>
            <span class="member-name">–ë–∏–Ω–≥—É—Å</span>
        </div>
        <div class="member" id="memberPopcat" onclick="showProfile('popcat')">
            <div class="avatar" id="avatarPopcat">üò∏</div>
            <span class="member-name">–ü–æ–ø–∫—ç—Ç</span>
        </div>
    </div>
    
    <div class="chat-container" id="chat"></div>
    
    <div class="typing-indicator hidden" id="typingIndicator">
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
    </div>
    
    <div class="input-area" id="inputArea">
        <button class="button" id="actionBtn1" onclick="handleChoice(1)"></button>
        <button class="button secondary" id="actionBtn2" onclick="handleChoice(2)"></button>
        <div class="quick-actions" id="quickActions"></div>
    </div>
    
    <div class="bsod hidden" id="bsod">
        <pre>
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  –°–ò–°–¢–ï–ú–ù–ê–Ø –û–®–ò–ë–ö–ê                     ‚ïë
‚ïë  –†–ï–ê–õ–¨–ù–û–°–¢–¨ –†–ê–ó–†–£–®–ê–ï–¢–°–Ø                ‚ïë
‚ïë                                       ‚ïë
‚ïë  –¶–ò–ö–õ: <span id="bsodCycle">1</span>                               ‚ïë
‚ïë  –£–†–û–í–ï–ù–¨ –°–¢–†–ê–•–ê: <span id="bsodFear">0</span>                      ‚ïë
‚ïë                                       ‚ïë
‚ïë  "–ö–¢–û-–¢–û –°–ú–û–¢–†–ò–¢ –ù–ê –¢–ï–ë–Ø"               ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
        </pre>
    </div>
    
    <div id="shadowMessage" class="shadow-message hidden"></div>
    <div id="demonText" class="demon-text hidden"></div>
    <div id="bloodRain" class="blood-rain hidden"></div>
    
    <!-- –ß–ï–õ–û–í–ï–ö -->
    <div id="humanOverlay" class="human-overlay">
        <div class="human-figure">üë§</div>
        <div class="human-text">–ü–ï–†–ï–°–¢–ê–ù–¨ –ò–ì–†–ê–¢–¨... –≠–¢–ê –ò–ì–†–ê –°–¢–†–ê–ù–ù–ê–Ø...</div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
        let tg = window.Telegram?.WebApp;
        if (tg) {
            tg.expand();
        }

        // ===== –≠–õ–ï–ú–ï–ù–¢–´ =====
        const chatEl = document.getElementById('chat');
        const typingIndicator = document.getElementById('typingIndicator');
        const bsodEl = document.getElementById('bsod');
        const bsodCycle = document.getElementById('bsodCycle');
        const bsodFear = document.getElementById('bsodFear');
        const shadowEl = document.getElementById('shadowMessage');
        const demonText = document.getElementById('demonText');
        const bloodRain = document.getElementById('bloodRain');
        const humanOverlay = document.getElementById('humanOverlay');
        const actionBtn1 = document.getElementById('actionBtn1');
        const actionBtn2 = document.getElementById('actionBtn2');
        const quickActions = document.getElementById('quickActions');
        const headerTitle = document.getElementById('headerTitle');
        const fearLevelEl = document.getElementById('fearLevel');
        const cycleCounter = document.getElementById('cycleCounter');
        const menuPanel = document.getElementById('menuPanel');

        // ===== –ù–ê–°–¢–û–Ø–©–ê–Ø –°–¢–†–ê–®–ù–ê–Ø –ú–£–ó–´–ö–ê =====
        let audioContext = null;
        let isMuted = false;

        function initAudio() {
            if (audioContext) return;
            
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // –ì–ª–∞–≤–Ω—ã–π —Ä–µ–≥—É–ª—è—Ç–æ—Ä –≥—Ä–æ–º–∫–æ—Å—Ç–∏
                const masterGain = audioContext.createGain();
                masterGain.gain.value = 0.15;
                masterGain.connect(audioContext.destination);
                
                // ===== 1. –ù–ò–ó–ö–ò–ô –ì–£–õ (–ê–¢–ú–û–°–§–ï–†–ê) =====
                const bassOsc = audioContext.createOscillator();
                bassOsc.type = 'sine';
                bassOsc.frequency.value = 55; // –õ—è –Ω–∏–∑–∫–æ–µ
                
                const bassGain = audioContext.createGain();
                bassGain.gain.value = 0.12;
                
                bassOsc.connect(bassGain);
                bassGain.connect(masterGain);
                bassOsc.start();
                
                // ===== 2. –°–†–ï–î–ù–ò–ô –î–†–û–ù (–ù–ê–ü–†–Ø–ñ–ï–ù–ò–ï) =====
                const droneOsc = audioContext.createOscillator();
                droneOsc.type = 'triangle';
                droneOsc.frequency.value = 110; // –õ—è –Ω–∞ –æ–∫—Ç–∞–≤—É –≤—ã—à–µ
                
                const droneGain = audioContext.createGain();
                droneGain.gain.value = 0.08;
                
                droneOsc.connect(droneGain);
                droneGain.connect(masterGain);
                droneOsc.start();
                
                // ===== 3. –î–ò–°–°–û–ù–ê–ù–°–ù–´–ô –î–†–û–ù (–°–¢–†–ê–•) =====
                const dissonantOsc = audioContext.createOscillator();
                dissonantOsc.type = 'sawtooth';
                dissonantOsc.frequency.value = 111; // –ß—É—Ç—å –≤—ã—à–µ –¥–ª—è –¥–∏—Å—Å–æ–Ω–∞–Ω—Å–∞
                
                const dissonantGain = audioContext.createGain();
                dissonantGain.gain.value = 0.05;
                
                dissonantOsc.connect(dissonantGain);
                dissonantGain.connect(masterGain);
                dissonantOsc.start();
                
                // ===== 4. –®–£–ú –í–ï–¢–†–ê (–®–ï–ü–û–¢) =====
                const bufferSize = 4096;
                const noiseNode = audioContext.createScriptProcessor(bufferSize, 1, 1);
                noiseNode.onaudioprocess = function(e) {
                    const output = e.outputBuffer.getChannelData(0);
                    for (let i = 0; i < bufferSize; i++) {
                        output[i] = (Math.random() * 2 - 1) * 0.03;
                    }
                };
                
                const noiseGain = audioContext.createGain();
                noiseGain.gain.value = 0.02;
                
                noiseNode.connect(noiseGain);
                noiseGain.connect(masterGain);
                
                // ===== 5. –°–õ–£–ß–ê–ô–ù–´–ï –°–¢–†–ê–®–ù–´–ï –ó–í–£–ö–ò =====
                function playRandomScare() {
                    if (!audioContext || isMuted) return;
                    
                    const now = audioContext.currentTime;
                    const nextScare = 5000 + Math.random() * 10000; // 5-15 —Å–µ–∫—É–Ω–¥
                    
                    setTimeout(() => {
                        if (Math.random() > 0.3) { // 70% —à–∞–Ω—Å
                            const osc = audioContext.createOscillator();
                            const gain = audioContext.createGain();
                            
                            const type = Math.random();
                            
                            if (type < 0.3) {
                                // –ù–∏–∑–∫–∏–π —É–¥–∞—Ä
                                osc.frequency.value = 80 + Math.random() * 40;
                                osc.type = 'triangle';
                                gain.gain.setValueAtTime(0.15, now);
                                gain.gain.exponentialRampToValueAtTime(0.001, now + 1.5);
                            } else if (type < 0.6) {
                                // –°–∫—Ä–∏–ø
                                osc.frequency.value = 200 + Math.random() * 300;
                                osc.type = 'sawtooth';
                                gain.gain.setValueAtTime(0.1, now);
                                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.8);
                            } else {
                                // –í–æ–π
                                osc.frequency.value = 150 + Math.random() * 100;
                                osc.type = 'sine';
                                gain.gain.setValueAtTime(0.08, now);
                                gain.gain.linearRampToValueAtTime(0.15, now + 0.5);
                                gain.gain.linearRampToValueAtTime(0.001, now + 2);
                                
                                osc.frequency.setValueAtTime(osc.frequency.value, now);
                                osc.frequency.linearRampToValueAtTime(osc.frequency.value * 0.5, now + 1);
                            }
                            
                            osc.connect(gain);
                            gain.connect(masterGain);
                            osc.start(now);
                            osc.stop(now + 2);
                        }
                        
                        playRandomScare(); // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π
                    }, nextScare);
                }
                
                playRandomScare();
                
                // ===== 6. –ü–£–õ–¨–°–ê–¶–ò–Ø (–ù–ê–†–ê–°–¢–ê–ù–ò–ï –°–¢–†–ê–•–ê) =====
                function pulseFear() {
                    if (!audioContext || isMuted) return;
                    
                    const now = audioContext.currentTime;
                    const pulseOsc = audioContext.createOscillator();
                    pulseOsc.type = 'sine';
                    pulseOsc.frequency.value = 60;
                    
                    const pulseGain = audioContext.createGain();
                    pulseGain.gain.value = 0;
                    
                    pulseOsc.connect(pulseGain);
                    pulseGain.connect(masterGain);
                    pulseOsc.start();
                    
                    // –ü—É–ª—å—Å–∞—Ü–∏—è
                    for (let i = 0; i < 10; i++) {
                        const time = now + i * 0.5;
                        pulseGain.gain.setValueAtTime(0, time);
                        pulseGain.gain.linearRampToValueAtTime(0.05 * (fearLevel / 50), time + 0.2);
                        pulseGain.gain.linearRampToValueAtTime(0, time + 0.4);
                    }
                    
                    pulseOsc.stop(now + 5);
                    
                    // –ü–æ–≤—Ç–æ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
                    setTimeout(pulseFear, 10000);
                }
                
                pulseFear();
                
            } catch (e) {
                console.log('–ê—É–¥–∏–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
            }
        }

        function playSound(type) {
            if (!audioContext || isMuted) return;
            
            try {
                const now = audioContext.currentTime;
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                
                switch(type) {
                    case 'glitch':
                        // –ñ—É—Ç–∫–∏–π –≥–ª–∏—Ç—á
                        osc.frequency.value = 100 + Math.random() * 400;
                        osc.type = 'sawtooth';
                        gain.gain.setValueAtTime(0.15, now);
                        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.2);
                        
                        const osc2 = audioContext.createOscillator();
                        osc2.frequency.value = osc.frequency.value * 1.5;
                        osc2.type = 'square';
                        osc2.connect(gain);
                        osc2.start(now);
                        osc2.stop(now + 0.2);
                        break;
                        
                    case 'death':
                        // –¢—è–∂–µ–ª—ã–π —É–¥–∞—Ä —Å–º–µ—Ä—Ç–∏
                        osc.frequency.value = 60;
                        osc.type = 'triangle';
                        gain.gain.setValueAtTime(0.25, now);
                        gain.gain.exponentialRampToValueAtTime(0.001, now + 1);
                        
                        setTimeout(() => {
                            const deathDrone = audioContext.createOscillator();
                            deathDrone.frequency.value = 50;
                            deathDrone.type = 'sine';
                            const droneGain = audioContext.createGain();
                            droneGain.gain.value = 0.05;
                            deathDrone.connect(droneGain);
                            droneGain.connect(audioContext.destination);
                            deathDrone.start();
                            deathDrone.stop(audioContext.currentTime + 2);
                        }, 100);
                        break;
                        
                    case 'shadow':
                        // –®–µ–ø–æ—Ç —Ç–µ–Ω–∏
                        osc.frequency.value = 200;
                        osc.type = 'sine';
                        gain.gain.setValueAtTime(0.1, now);
                        gain.gain.linearRampToValueAtTime(0.2, now + 0.5);
                        gain.gain.linearRampToValueAtTime(0.001, now + 2);
                        
                        osc.frequency.setValueAtTime(200, now);
                        osc.frequency.linearRampToValueAtTime(100, now + 1);
                        osc.frequency.linearRampToValueAtTime(150, now + 2);
                        break;
                        
                    case 'human':
                        // –§–∏–Ω–∞–ª—å–Ω—ã–π —É–∂–∞—Å
                        osc.frequency.value = 300;
                        osc.type = 'sine';
                        gain.gain.setValueAtTime(0.2, now);
                        gain.gain.linearRampToValueAtTime(0.4, now + 1);
                        gain.gain.linearRampToValueAtTime(0.001, now + 3);
                        
                        const oscHuman = audioContext.createOscillator();
                        oscHuman.frequency.value = 310;
                        oscHuman.type = 'sawtooth';
                        const gainHuman = audioContext.createGain();
                        gainHuman.gain.value = 0.1;
                        oscHuman.connect(gainHuman);
                        gainHuman.connect(audioContext.destination);
                        oscHuman.start(now);
                        oscHuman.stop(now + 3);
                        break;
                }
                
                osc.connect(gain);
                gain.connect(audioContext.destination);
                osc.start(now);
                osc.stop(now + 2);
                
            } catch (e) {}
        }

        // ===== –ü–ï–†–°–û–ù–ê–ñ–ò =====
        const members = {
            shlypa: { 
                name: '–®–ª—ë–ø–∞', 
                avatar: 'üò∫', 
                alive: true, 
                depressionLevel: 0,
                possessed: false,
                element: document.getElementById('memberShlypa'), 
                avatarEl: document.getElementById('avatarShlypa'),
                nameEl: document.querySelector('#memberShlypa .member-name')
            },
            bingus: { 
                name: '–ë–∏–Ω–≥—É—Å', 
                avatar: 'üòø', 
                alive: true, 
                deathObsession: 0,
                possessed: false,
                element: document.getElementById('memberBingus'), 
                avatarEl: document.getElementById('avatarBingus'),
                nameEl: document.querySelector('#memberBingus .member-name')
            },
            popcat: { 
                name: '–ü–æ–ø–∫—ç—Ç', 
                avatar: 'üò∏', 
                alive: true, 
                schizophreniaLevel: 0,
                possessed: false,
                element: document.getElementById('memberPopcat'), 
                avatarEl: document.getElementById('avatarPopcat'),
                nameEl: document.querySelector('#memberPopcat .member-name')
            }
        };

        // ===== –°–û–°–¢–û–Ø–ù–ò–ï =====
        let day = 1;
        let step = 0;
        let cycle = 1;
        let fearLevel = 0;
        let bingusDeadInCycle1 = false;
        let finalCycle = false;
        let finalSurvivor = null;
        let hellMode = false;
        let humanShown = false;
        let demonMessages = [
            '–¢–´ –ó–î–ï–°–¨ –ù–ê–í–°–ï–ì–î–ê',
            '–û–ù–ò –ù–ï –ü–†–û–°–¢–Ø–¢',
            '–°–ú–ï–†–¢–¨ –ë–õ–ò–ó–ö–û',
            '–≠–¢–û –ù–ï –ò–ì–†–ê',
            '–¢–´ –£–ñ–ï –£–ú–ò–†–ê–õ',
            '–ö–†–û–í–¨ –ù–ê –¢–í–û–ò–• –†–£–ö–ê–•',
            '–û–ù–ò –°–ú–û–¢–†–Ø–¢ –ù–ê –¢–ï–ë–Ø',
            '–¢–ï–ù–¨ –†–Ø–î–û–ú',
            '–ü–†–û–°–ù–ò–°–¨',
            '–≠–¢–û –¢–í–û–ô –ö–û–®–ú–ê–†',
            '–¢–´ –°–û–ó–î–ê–õ –≠–¢–û',
            '–û–ù–ò –ó–ù–ê–Æ–¢ –ü–†–ê–í–î–£',
            '–í–´–•–û–î–ê –ù–ï–¢',
            '–°–ß–ò–¢–ê–ô –¶–ò–ö–õ–´',
            '3:15'
        ];

        const SAVE_KEY = 'bytecode_sound_final';

        // ===== –ó–ê–ì–†–£–ó–ö–ê =====
        function loadGame() {
            try {
                const saved = localStorage.getItem(SAVE_KEY);
                if (saved) {
                    const data = JSON.parse(saved);
                    day = data.day || 1;
                    step = data.step || 0;
                    cycle = data.cycle || 1;
                    fearLevel = data.fearLevel || 0;
                    bingusDeadInCycle1 = data.bingusDeadInCycle1 || false;
                    finalCycle = data.finalCycle || false;
                    hellMode = data.hellMode || false;
                    humanShown = data.humanShown || false;
                    
                    if (data.members) {
                        if (data.members.shlypa) {
                            members.shlypa.alive = data.members.shlypa.alive;
                            members.shlypa.depressionLevel = data.members.shlypa.depressionLevel || 0;
                        }
                        if (data.members.bingus) {
                            members.bingus.alive = data.members.bingus.alive;
                            members.bingus.deathObsession = data.members.bingus.deathObsession || 0;
                        }
                        if (data.members.popcat) {
                            members.popcat.alive = data.members.popcat.alive;
                            members.popcat.schizophreniaLevel = data.members.popcat.schizophreniaLevel || 0;
                        }
                    }
                    
                    updateMemberStatus();
                    updateCycle();
                    updateFearLevel();
                    applyHellMode();
                    return true;
                }
            } catch (e) {}
            return false;
        }

        function saveGame() {
            let membersData = {
                shlypa: {
                    alive: members.shlypa.alive,
                    depressionLevel: members.shlypa.depressionLevel
                },
                bingus: {
                    alive: members.bingus.alive,
                    deathObsession: members.bingus.deathObsession
                },
                popcat: {
                    alive: members.popcat.alive,
                    schizophreniaLevel: members.popcat.schizophreniaLevel
                }
            };
            
            localStorage.setItem(SAVE_KEY, JSON.stringify({
                day, step, cycle, fearLevel,
                members: membersData,
                bingusDeadInCycle1,
                finalCycle,
                hellMode,
                humanShown
            }));
        }

        function updateCycle() {
            cycleCounter.innerText = `üîÑ ${cycle}`;
            headerTitle.innerText = `–ë–∞–π—Ç –ö–æ–¥–∞ ‚Ä¢ –¶–∏–∫–ª ${cycle}`;
            
            if (cycle > 1) {
                if (members.shlypa.alive) {
                    members.shlypa.depressionLevel = Math.min(5, members.shlypa.depressionLevel + 1);
                    if (Math.random() > 0.7) members.shlypa.possessed = true;
                }
                if (members.popcat.alive) {
                    members.popcat.schizophreniaLevel = Math.min(5, members.popcat.schizophreniaLevel + 1);
                    if (Math.random() > 0.7) members.popcat.possessed = true;
                }
                if (members.bingus.alive) {
                    members.bingus.deathObsession = Math.min(5, members.bingus.deathObsession + 1);
                    if (Math.random() > 0.7) members.bingus.possessed = true;
                }
            }
            
            if (cycle === 2 && bingusDeadInCycle1) {
                members.bingus.alive = false;
            }
            
            if (cycle >= 5 && !finalCycle) {
                finalCycle = true;
                hellMode = true;
                const alive = [];
                if (members.shlypa.alive) alive.push('shlypa');
                if (members.bingus.alive) alive.push('bingus');
                if (members.popcat.alive) alive.push('popcat');
                
                if (alive.length > 0) {
                    finalSurvivor = alive[Math.floor(Math.random() * alive.length)];
                }
            }
            
            updateMemberStatus();
        }

        function updateFearLevel() {
            fearLevelEl.innerText = `üò® ${fearLevel}%`;
            if (bsodFear) bsodFear.innerText = fearLevel;
        }

        function updateMemberStatus() {
            for (let id in members) {
                const m = members[id];
                if (m.alive) {
                    m.element.classList.remove('dead');
                    m.avatarEl.classList.remove('dead-avatar');
                    if (m.possessed) {
                        m.element.classList.add('possessed');
                        m.avatarEl.classList.add('possessed-avatar');
                    } else {
                        m.element.classList.remove('possessed');
                        m.avatarEl.classList.remove('possessed-avatar');
                    }
                } else {
                    m.element.classList.add('dead');
                    m.avatarEl.classList.add('dead-avatar');
                }
            }
        }

        // ===== –ê–î–°–ö–ò–ï –≠–§–§–ï–ö–¢–´ =====
        function applyHellMode() {
            if (!hellMode) return;
            
            document.body.classList.add('hell-mode');
            document.body.classList.add('blood-mode');
            document.body.classList.add('static-mode');
            document.body.classList.add('scanlines-mode');
            
            demonText.classList.remove('hidden');
            setInterval(() => {
                if (hellMode && Math.random() > 0.5) {
                    demonText.innerText = demonMessages[Math.floor(Math.random() * demonMessages.length)];
                }
            }, 2000);
            
            bloodRain.classList.remove('hidden');
            for (let i = 0; i < 100; i++) {
                const drop = document.createElement('div');
                drop.className = 'blood-drop';
                drop.style.left = Math.random() * 100 + '%';
                drop.style.animationDuration = 0.3 + Math.random() * 1 + 's';
                drop.style.animationDelay = Math.random() * 2 + 's';
                bloodRain.appendChild(drop);
            }
        }

        function glitch(intensity = 1) {
            document.body.classList.add('glitch-mode');
            playSound('glitch');
            if (navigator.vibrate) navigator.vibrate(intensity * 200);
            fearLevel += intensity * 10;
            updateFearLevel();
            
            let effects = [
                'static-mode',
                'vhs-mode',
                'invert-mode',
                'blur-mode',
                'xray-mode',
                'crt-mode',
                'distortion-mode'
            ];
            
            for (let i = 0; i < intensity; i++) {
                setTimeout(() => {
                    let effect = effects[Math.floor(Math.random() * effects.length)];
                    document.body.classList.add(effect);
                    setTimeout(() => document.body.classList.remove(effect), intensity * 500);
                }, i * 200);
            }
            
            setTimeout(() => document.body.classList.remove('glitch-mode'), intensity * 2000);
        }

        function showShadow(text) {
            shadowEl.innerText = text;
            shadowEl.classList.remove('hidden');
            playSound('shadow');
            setTimeout(() => shadowEl.classList.add('hidden'), 3000);
            
            const msg = document.createElement('div');
            msg.className = 'message system-message ghost-message';
            const time = new Date().toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
            msg.innerHTML = `
                <div class="message-avatar">üëÅÔ∏è</div>
                <div class="message-content">
                    <div class="message-name" style="color: #ff0000">–¢–ï–ù–¨</div>
                    <div class="message-text">${text}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            chatEl.appendChild(msg);
            chatEl.scrollTop = chatEl.scrollHeight;
            
            setTimeout(() => {
                msg.classList.add('deleting');
                setTimeout(() => msg.remove(), 250);
            }, 3000);
        }

        async function typeMessage(seconds = 1) {
            typingIndicator.classList.remove('hidden');
            await new Promise(r => setTimeout(r, seconds * 800));
            typingIndicator.classList.add('hidden');
        }

        function addMessage(sender, text, isOwn = false, isFinal = false) {
            if (sender === '–®–ª—ë–ø–∞' && !members.shlypa.alive) return;
            if (sender === '–ü–æ–ø–∫—ç—Ç' && !members.popcat.alive) return;
            if (sender === '–ë–∏–Ω–≥—É—Å' && !members.bingus.alive) return;
            
            if (!text || text === '') return;
            
            const msg = document.createElement('div');
            msg.className = `message ${isOwn ? 'own-message' : ''} ${isFinal ? 'final-message' : ''}`;
            
            let avatar = 'üò∫';
            if (sender === '–ë–∏–Ω–≥—É—Å') avatar = 'üòø';
            else if (sender === '–ü–æ–ø–∫—ç—Ç') avatar = 'üò∏';
            else if (sender === '–¢—ã') avatar = 'üë§';
            else if (sender === '–°–∏—Å—Ç–µ–º–∞') avatar = 'üíÄ';
            
            const time = new Date().toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
            
            msg.innerHTML = `
                ${!isOwn ? `<div class="message-avatar">${avatar}</div>` : ''}
                <div class="message-content">
                    <div class="message-name">${sender}</div>
                    <div class="message-text">${text}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            chatEl.appendChild(msg);
            chatEl.scrollTop = chatEl.scrollHeight;
        }

        function addSystemMessage(text) {
            addMessage('–°–∏—Å—Ç–µ–º–∞', text, false);
        }

        // ===== –ß–ï–õ–û–í–ï–ö =====
        function showHuman() {
            if (humanShown) return;
            humanShown = true;
            
            chatEl.innerHTML = '';
            document.body.classList.add('white-flash');
            playSound('human');
            
            setTimeout(() => {
                document.body.classList.remove('white-flash');
                humanOverlay.classList.add('visible');
                
                for (let i = 0; i < 10; i++) {
                    setTimeout(() => {
                        glitch(3);
                        document.body.classList.add('invert-mode');
                        document.body.classList.add('static-mode');
                        document.body.classList.add('blur-mode');
                    }, i * 200);
                }
                
                setTimeout(() => {
                    const humanMsg = document.createElement('div');
                    humanMsg.className = 'message final-message';
                    humanMsg.style.maxWidth = '100%';
                    humanMsg.style.margin = '20px';
                    humanMsg.innerHTML = `
                        <div class="message-avatar">üë§</div>
                        <div class="message-content">
                            <div class="message-name" style="color: black;">–ß–ï–õ–û–í–ï–ö</div>
                            <div class="message-text">–ü–ï–†–ï–°–¢–ê–ù–¨ –ò–ì–†–ê–¢–¨ –í –≠–¢–£ –ò–ì–†–£... –û–ù–ê –°–¢–†–ê–ù–ù–ê–Ø...</div>
                        </div>
                    `;
                    chatEl.appendChild(humanMsg);
                }, 2000);
                
                setTimeout(() => {
                    addSystemMessage('–ò–ì–†–ê –ó–ê–í–ï–†–®–ï–ù–ê');
                    addSystemMessage('–£–î–ê–õ–ò –≠–¢–û –ü–†–ò–õ–û–ñ–ï–ù–ò–ï');
                    
                    actionBtn1.classList.add('disabled');
                    actionBtn2.classList.add('disabled');
                    quickActions.innerHTML = '';
                }, 4000);
            }, 100);
        }

        // ===== –ú–ï–ù–Æ =====
        function toggleMenu() {
            menuPanel.classList.toggle('open');
        }

        function deleteAllData() {
            if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—é –∏–≥—Ä—É?')) {
                localStorage.removeItem(SAVE_KEY);
                location.reload();
            }
        }

        // ===== –†–ï–ü–õ–ò–ö–ò =====
        function getShlypaMessage() {
            if (!members.shlypa.alive) return null;
            
            let msg = '';
            const level = members.shlypa.depressionLevel;
            
            if (members.shlypa.possessed) {
                const possessed = [
                    'üç™ ...–Ø –ù–ï –®–õ–Å–ü–ê',
                    'üç™ ...–û–ù–û –í–ù–£–¢–†–ò –ú–ï–ù–Ø',
                    'üç™ ...–ü–û–ú–û–ì–ò... –û–ù–û –ì–û–í–û–†–ò–¢',
                    'üç™ ...–¢–ï–ù–¨ –ó–ê–•–í–ê–¢–ò–õ–ê –ú–ï–ù–Ø',
                    'üç™ ...–°–ö–û–†–û –¢–´ –ë–£–î–ï–®–¨ –ö–ê–ö –ú–´'
                ];
                msg = possessed[Math.floor(Math.random() * possessed.length)];
            } else {
                const messages = [
                    'üç™ –ü—Ä–∏–≤–µ—Ç... –ø–µ—á–µ–Ω—å–∫–∞?',
                    'üç™ ...–ø–µ—á–µ–Ω—å–∫–∞',
                    'üç™ ...',
                    'üç™ ...–≤—Å—ë —Ä–∞–≤–Ω–æ',
                    'üç™ ...–∑–∞—á–µ–º?',
                    'üç™ ...–Ω–∏—á–µ–≥–æ –Ω–µ –≤–∞–∂–Ω–æ'
                ];
                msg = messages[level];
            }
            
            return msg;
        }

        function getBingusMessage() {
            if (!members.bingus.alive) return null;
            
            let msg = '';
            const level = members.bingus.deathObsession;
            
            if (members.bingus.possessed) {
                const possessed = [
                    '...–°–ú–ï–†–¢–¨ –ì–û–í–û–†–ò–¢ –°–û –ú–ù–û–ô',
                    '...–û–ù–û –•–û–ß–ï–¢ –£–ë–ò–¢–¨ –í–°–ï–•',
                    '...–¢–ï–ù–¨ –®–ï–ü–ß–ï–¢ –ü–†–û –¢–ï–ë–Ø',
                    '...–ú–´ –£–ú–†–Å–ú –í–ú–ï–°–¢–ï',
                    '...–ü–†–ò–°–û–ï–î–ò–ù–Ø–ô–°–Ø –ö –ù–ê–ú'
                ];
                msg = possessed[Math.floor(Math.random() * possessed.length)];
            } else {
                if (level === 0) msg = '...–ø—Ä–∏–≤–µ—Ç';
                else if (level === 1) msg = '...–∫–∞–∫ –¥–æ–ª–≥–æ —ç—Ç–æ –ø—Ä–æ–¥–ª–∏—Ç—Å—è?';
                else if (level === 2) msg = '...–º—ã –≤—Å–µ —É–º—Ä—ë–º';
                else if (level === 3) msg = '...—Å–º–µ—Ä—Ç—å –±–ª–∏–∑–∫–æ';
                else if (level === 4) msg = '...—è —Ö–æ—á—É —É–º–µ—Ä–µ—Ç—å';
                else if (level === 5) msg = '...—Å–º–µ—Ä—Ç—å —Å–º–µ—Ä—Ç—å —Å–º–µ—Ä—Ç—å...';
            }
            
            return msg;
        }

        function getPopcatMessage() {
            if (!members.popcat.alive) return null;
            
            let msg = '';
            const level = members.popcat.schizophreniaLevel;
            
            if (members.popcat.possessed) {
                const possessed = [
                    'üëÅÔ∏èüò∏üëÅÔ∏è –û–ù–ò –í –ú–û–ï–ô –ì–û–õ–û–í–ï',
                    'üò± –¢–ï–ù–¨ –ì–û–í–û–†–ò–¢ –°–û –ú–ù–û–ô',
                    'üëÅÔ∏è –ú–´ –ß–ê–°–¢–¨ –¢–ï–ë–Ø',
                    'üò∏üëÅÔ∏è –¢–´ –¢–û–ñ–ï –û–î–ò–ù –ò–ó –ù–ê–°',
                    'üëÅÔ∏èüò±üëÅÔ∏è –ü–†–û–°–ù–ò–°–¨'
                ];
                msg = possessed[Math.floor(Math.random() * possessed.length)];
            } else {
                const messages = [
                    'üò∏ –•–ï–ô!',
                    'üò∏ ...—Ç—ã —Å–ª—ã—à–∏—à—å?',
                    'üò∏ –û–ù–ò –ì–û–í–û–†–Ø–¢',
                    'üò∏üëÅÔ∏è –û–ù–ò –ó–î–ï–°–¨',
                    'üëÅÔ∏èüò∏üëÅÔ∏è –ù–ï –°–ú–û–¢–†–ò',
                    'üò±üò±üò±'
                ];
                msg = messages[level];
            }
            
            return msg;
        }

        // ===== –ü–†–û–§–ò–õ–ò =====
        function showProfile(name) {
            if (!members[name].alive) return;
            
            if (Math.random() > 0.8) {
                glitch(1);
            }
            
            if (name === 'shlypa') {
                const msg = getShlypaMessage();
                if (msg) addMessage('–®–ª—ë–ø–∞', msg, false);
                if (Math.random() > 0.6 && members.shlypa.depressionLevel < 5) {
                    members.shlypa.depressionLevel++;
                }
                if (Math.random() > 0.9) members.shlypa.possessed = true;
            } else if (name === 'bingus') {
                const msg = getBingusMessage();
                if (msg) addMessage('–ë–∏–Ω–≥—É—Å', msg, false);
                if (members.bingus.deathObsession < 5) {
                    members.bingus.deathObsession++;
                }
                if (Math.random() > 0.9) members.bingus.possessed = true;
            } else if (name === 'popcat') {
                const msg = getPopcatMessage();
                if (msg) addMessage('–ü–æ–ø–∫—ç—Ç', msg, false);
                if (Math.random() > 0.5 && members.popcat.schizophreniaLevel < 5) {
                    members.popcat.schizophreniaLevel++;
                }
                if (Math.random() > 0.9) members.popcat.possessed = true;
            }
            
            updateMemberStatus();
            saveGame();
        }

        // ===== –°–ö–†–ò–ü–¢–´ =====
        function startScriptDay() {
            const aliveTargets = [];
            if (members.shlypa.alive) aliveTargets.push('shlypa');
            if (members.bingus.alive) aliveTargets.push('bingus');
            if (members.popcat.alive) aliveTargets.push('popcat');
            
            if (aliveTargets.length === 0) return;
            
            addSystemMessage('üìù –ü–†–û –ö–û–ì–û –ù–ê–ü–ò–°–ê–¢–¨ –°–ö–†–ò–ü–¢?');
            
            quickActions.innerHTML = '';
            
            aliveTargets.forEach(target => {
                const btn = document.createElement('button');
                btn.className = 'button script-choice';
                btn.innerText = target === 'shlypa' ? '–®–ª—ë–ø–∞' : (target === 'bingus' ? '–ë–∏–Ω–≥—É—Å' : '–ü–æ–ø–∫—ç—Ç');
                btn.onclick = () => writeScript(target);
                quickActions.appendChild(btn);
            });
        }

        function writeScript(target) {
            let name = target === 'shlypa' ? '–®–ª—ë–ø–∞' : (target === 'bingus' ? '–ë–∏–Ω–≥—É—Å' : '–ü–æ–ø–∫—ç—Ç');
            
            const scripts = [
                `def ${name}_cycle():\n    while True:\n        ${name}.die()\n        ${name}.suffer()\n        # –ë–ï–°–ö–û–ù–ï–ß–ù–û`,
                `class ${name}:\n    def __init__(self):\n        self.exists = False\n        self.aware = True\n        # –û–ù –ó–ù–ê–ï–¢`,
                `if ${name}_consciousness > 0:\n    ${name}.realize()\n    ${name}.scream()\n    # –ö–†–ò–ö`,
                `memory[${cycle}][${name}] = "dead"\n# –ù–û –¢–´ –í–°–Å –†–ê–í–ù–û –ü–û–ú–ù–ò–®–¨`,
                `# ${name} –±—ã–ª –∑–¥–µ—Å—å\n# –≤ –∫–∞–∂–¥–æ–º —Ü–∏–∫–ª–µ\n# –≤ –∫–∞–∂–¥–æ–π —Å–º–µ—Ä—Ç–∏\n# –û–ù –ü–û–ú–ù–ò–¢ –¢–ï–ë–Ø`,
                `ERROR: ${name}.existence = CORRUPTED\n# –§–ê–ô–õ –ü–û–í–†–ï–ñ–î–Å–ù\n# –ö–ê–ö –¢–í–û–Å –°–û–ó–ù–ê–ù–ò–ï`,
                `while consciousness:\n    ${name}.suffer()\n    ${name}.forget()\n    # –ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨`
            ];
            
            const script = scripts[Math.floor(Math.random() * scripts.length)];
            
            addMessage('–¢—ã', `–ü–∏—à—É —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ ${name}...`, true);
            
            setTimeout(() => {
                const scriptDiv = document.createElement('div');
                scriptDiv.className = 'script-block';
                scriptDiv.innerHTML = `<div class="script-code">${script}</div>`;
                chatEl.appendChild(scriptDiv);
                chatEl.scrollTop = chatEl.scrollHeight;
                
                glitch(2);
                
                if (Math.random() > 0.7) {
                    showShadow('–¢–´ –ü–ò–®–ï–®–¨ –ò–• –°–£–î–¨–ë–£');
                }
                
                setTimeout(() => {
                    if (target === 'shlypa') {
                        const msg = getShlypaMessage();
                        if (msg) addMessage('–®–ª—ë–ø–∞', msg, false);
                    } else if (target === 'bingus' && members.bingus.alive) {
                        const msg = getBingusMessage();
                        if (msg) addMessage('–ë–∏–Ω–≥—É—Å', msg, false);
                    } else if (target === 'popcat') {
                        const msg = getPopcatMessage();
                        if (msg) addMessage('–ü–æ–ø–∫—ç—Ç', msg, false);
                    }
                }, 1000);
            }, 1000);
            
            quickActions.innerHTML = '';
            saveGame();
        }

        // ===== –î–ù–ò =====
        async function startDay1() {
            // –ó–∞–ø—É—Å–∫–∞–µ–º –º—É–∑—ã–∫—É
            initAudio();
            
            if (members.shlypa.alive) {
                const msg = getShlypaMessage();
                if (msg) addMessage('–®–ª—ë–ø–∞', msg, false);
                await typeMessage(1.2);
            }
            
            if (members.popcat.alive) {
                const msg = getPopcatMessage();
                if (msg) addMessage('–ü–æ–ø–∫—ç—Ç', msg, false);
                await typeMessage(1.2);
            }
            
            if (members.bingus.alive) {
                const msg = getBingusMessage();
                if (msg) addMessage('–ë–∏–Ω–≥—É—Å', msg, false);
                await typeMessage(1.2);
            }
            
            actionBtn1.innerText = 'üí¨ –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å';
            actionBtn2.innerText = 'üç™ –ü–µ—á–µ–Ω—å–∫–∞';
            
            if (members.shlypa.alive || members.bingus.alive || members.popcat.alive) {
                quickActions.innerHTML = '<button class="button script-choice" onclick="startScriptDay()">üìù –°–ö–†–ò–ü–¢</button>';
            }
            
            step = 1;
        }

        async function day2() {
            await typeMessage(1);
            
            actionBtn1.innerText = '‚ùì –°–ø—Ä–æ—Å–∏—Ç—å';
            actionBtn2.innerText = 'üç™ –ü–µ—á–µ–Ω—å–∫–∞';
            
            if (members.shlypa.alive || members.bingus.alive || members.popcat.alive) {
                quickActions.innerHTML = '<button class="button script-choice" onclick="startScriptDay()">üìù –°–ö–†–ò–ü–¢</button>';
            }
            
            step = 1;
        }

        async function day3() {
            glitch(2);
            await typeMessage(1);
            
            actionBtn1.innerText = 'üèÉ –ë–µ–∂–∞—Ç—å';
            actionBtn2.innerText = 'üï≥Ô∏è –ü—Ä—è—Ç–∞—Ç—å—Å—è';
            
            if (members.shlypa.alive || members.bingus.alive || members.popcat.alive) {
                quickActions.innerHTML = '<button class="button script-choice" onclick="startScriptDay()">üìù –°–ö–†–ò–ü–¢</button>';
            }
            
            step = 1;
        }

        async function day4() {
            await typeMessage(1);
            
            const aliveCount = Object.values(members).filter(m => m.alive).length;
            
            if (aliveCount === 0) {
                actionBtn1.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                actionBtn2.classList.add('disabled');
                actionBtn2.innerText = '‚ùå';
                quickActions.innerHTML = '';
                step = 1;
                return;
            }
            
            if (cycle === 1) {
                if (members.bingus.alive) {
                    actionBtn1.innerText = 'üíÄ –£–±–∏—Ç—å –ë–∏–Ω–≥—É—Å–∞';
                    actionBtn2.classList.add('disabled');
                    actionBtn2.innerText = '‚ùå';
                    quickActions.innerHTML = '';
                } else {
                    actionBtn1.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
                    actionBtn2.classList.add('disabled');
                    actionBtn2.innerText = '‚ùå';
                    quickActions.innerHTML = '';
                }
            } else {
                actionBtn1.classList.remove('disabled');
                actionBtn2.classList.remove('disabled');
                actionBtn1.innerText = '';
                actionBtn2.innerText = '';
                quickActions.innerHTML = '';
                
                let btnIndex = 1;
                
                if (members.shlypa.alive) {
                    if (btnIndex === 1) {
                        actionBtn1.innerText = 'üíî –®–ª—ë–ø–∞';
                        btnIndex++;
                    } else if (btnIndex === 2) {
                        actionBtn2.innerText = 'üíî –®–ª—ë–ø–∞';
                        btnIndex++;
                    }
                }
                
                if (members.bingus.alive) {
                    if (btnIndex === 1) {
                        actionBtn1.innerText = 'üò¢ –ë–∏–Ω–≥—É—Å';
                        btnIndex++;
                    } else if (btnIndex === 2) {
                        actionBtn2.innerText = 'üò¢ –ë–∏–Ω–≥—É—Å';
                        btnIndex++;
                    }
                }
                
                if (members.popcat.alive) {
                    if (btnIndex === 1) {
                        actionBtn1.innerText = 'üò∏ –ü–æ–ø–∫—ç—Ç';
                        btnIndex++;
                    } else if (btnIndex === 2) {
                        actionBtn2.innerText = 'üò∏ –ü–æ–ø–∫—ç—Ç';
                        btnIndex++;
                    } else {
                        quickActions.innerHTML = '<button class="button script-choice" onclick="killPopcat()">üò∏ –ü–æ–ø–∫—ç—Ç</button>';
                    }
                }
                
                if (aliveCount === 1 && actionBtn2.innerText === '') {
                    actionBtn2.classList.add('disabled');
                    actionBtn2.innerText = '‚ùå';
                }
            }
            step = 1;
        }

        async function day5() {
            await typeMessage(1);
            
            if (finalCycle) {
                document.body.classList.add('final-mode');
                document.body.classList.add('blood-mode');
                document.body.classList.add('static-mode');
                document.body.classList.add('scanlines-mode');
                
                addSystemMessage('‚ö†Ô∏è –§–ò–ù–ê–õ–¨–ù–´–ô –¶–ò–ö–õ ‚ö†Ô∏è');
                
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => glitch(3), i * 500);
                }
                
                if (finalSurvivor === 'shlypa' && members.shlypa.alive) {
                    addMessage('–®–ª—ë–ø–∞', 'üç™ ...–≠–¢–û –ö–û–ù–ï–¶...', false, true);
                } else if (finalSurvivor === 'bingus' && members.bingus.alive) {
                    addMessage('–ë–∏–Ω–≥—É—Å', '...–ù–ê–ö–û–ù–ï–¶-–¢–û... –°–ú–ï–†–¢–¨...', false, true);
                } else if (finalSurvivor === 'popcat' && members.popcat.alive) {
                    addMessage('–ü–æ–ø–∫—ç—Ç', 'üëÅÔ∏èüò∏üëÅÔ∏è –ì–û–õ–û–°–ê –ó–ê–¢–ò–•–ê–Æ–¢...', false, true);
                } else {
                    addSystemMessage('üíÄ –í–°–ï –ú–ï–†–¢–í–´');
                }
                
                actionBtn1.innerText = '‚û°Ô∏è –ó–ê–í–ï–†–®–ò–¢–¨';
                actionBtn2.innerText = '‚û°Ô∏è –ó–ê–í–ï–†–®–ò–¢–¨';
                quickActions.innerHTML = '';
                step = 2;
            } else {
                setTimeout(() => {
                    cycle++;
                    day = 1;
                    step = 0;
                    
                    updateMemberStatus();
                    updateCycle();
                    chatEl.innerHTML = '';
                    startDay1();
                    saveGame();
                }, 2000);
            }
        }

        // ===== –í–´–ë–û–† =====
        function handleChoice(choice) {
            if (day === 1 && step === 1) {
                handleDay1Choice(choice);
            } else if (day === 1 && step === 2) {
                day = 2;
                step = 0;
                day2();
            } else if (day === 2 && step === 1) {
                handleDay2Choice(choice);
            } else if (day === 2 && step === 2) {
                day = 3;
                step = 0;
                day3();
            } else if (day === 3 && step === 1) {
                handleDay3Choice(choice);
            } else if (day === 3 && step === 2) {
                day = 4;
                step = 0;
                day4();
            } else if (day === 4 && step === 1) {
                handleDay4Choice(choice);
            } else if (day === 4 && step === 2) {
                day = 5;
                step = 0;
                day5();
            } else if (day === 5 && step === 2) {
                showHuman();
            }
            saveGame();
        }

        async function handleDay1Choice(choice) {
            if (choice === 1) {
                addMessage('–¢—ã', '–ü–æ–≥–æ–≤–æ—Ä–∏–º?', true);
                await typeMessage(1);
                if (members.bingus.alive) {
                    const msg = getBingusMessage();
                    if (msg) addMessage('–ë–∏–Ω–≥—É—Å', msg, false);
                }
            } else {
                addMessage('–¢—ã', '–ü–µ—á–µ–Ω—å–∫—É!', true);
                await typeMessage(1);
                if (members.shlypa.alive) {
                    const msg = getShlypaMessage();
                    if (msg) addMessage('–®–ª—ë–ø–∞', msg, false);
                }
            }
            actionBtn1.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
            actionBtn2.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
            step = 2;
        }

        async function handleDay2Choice(choice) {
            if (choice === 1) {
                addMessage('–¢—ã', '–ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å?', true);
            } else {
                addMessage('–¢—ã', '–ü–µ—á–µ–Ω—å–∫—É!', true);
            }
            await typeMessage(1);
            actionBtn1.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
            actionBtn2.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
            step = 2;
        }

        async function handleDay3Choice(choice) {
            if (choice === 1) {
                addMessage('–¢—ã', '–ë–µ–≥—É!', true);
            } else {
                addMessage('–¢—ã', '–ü—Ä—è—á—É—Å—å!', true);
            }
            actionBtn1.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
            actionBtn2.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
            step = 2;
        }

        async function handleDay4Choice(choice) {
            if (cycle === 1 && members.bingus.alive) {
                addMessage('–¢—ã', '–ü—Ä–æ—â–∞–π, –ë–∏–Ω–≥—É—Å', true);
                await typeMessage(1);
                addMessage('–ë–∏–Ω–≥—É—Å', '...—è –∑–Ω–∞–ª...', false);
                members.bingus.alive = false;
                bingusDeadInCycle1 = true;
                updateMemberStatus();
                saveGame();
                playSound('death');
                glitch(2);
                showShadow('–ü–ï–†–í–ê–Ø –ö–†–û–í–¨');
            } else if (cycle > 1) {
                let killed = false;
                
                if (choice === 1) {
                    if (actionBtn1.innerText.includes('–®–ª—ë–ø–∞') && members.shlypa.alive) {
                        addMessage('–¢—ã', '–®–ª—ë–ø–∞, –ø—Ä–æ—â–∞–π', true);
                        await typeMessage(1);
                        members.shlypa.alive = false;
                        addSystemMessage('üíî –®–õ–Å–ü–ê –ú–Å–†–¢–í');
                        killed = true;
                        playSound('death');
                        showShadow('–î–ï–ü–†–ï–°–°–ò–Ø –£–®–õ–ê');
                    } else if (actionBtn1.innerText.includes('–ë–∏–Ω–≥—É—Å') && members.bingus.alive) {
                        addMessage('–¢—ã', '–ë–∏–Ω–≥—É—Å, –ø—Ä–æ—â–∞–π', true);
                        await typeMessage(1);
                        members.bingus.alive = false;
                        addSystemMessage('üò¢ –ë–ò–ù–ì–£–° –ú–Å–†–¢–í');
                        killed = true;
                        playSound('death');
                        showShadow('–°–ú–ï–†–¢–¨ –°–ù–û–í–ê');
                    } else if (actionBtn1.innerText.includes('–ü–æ–ø–∫—ç—Ç') && members.popcat.alive) {
                        addMessage('–¢—ã', '–ü–æ–ø–∫—ç—Ç, –ø—Ä–æ—â–∞–π', true);
                        await typeMessage(1);
                        members.popcat.alive = false;
                        addSystemMessage('üò∏ –ü–û–ü–ö–≠–¢ –ú–Å–†–¢–í');
                        killed = true;
                        playSound('death');
                        showShadow('–ì–û–õ–û–°–ê –ó–ê–¢–ò–•–õ–ò');
                    }
                }
                
                if (choice === 2) {
                    if (actionBtn2.innerText.includes('–®–ª—ë–ø–∞') && members.shlypa.alive) {
                        addMessage('–¢—ã', '–®–ª—ë–ø–∞, –ø—Ä–æ—â–∞–π', true);
                        await typeMessage(1);
                        members.shlypa.alive = false;
                        addSystemMessage('üíî –®–õ–Å–ü–ê –ú–Å–†–¢–í');
                        killed = true;
                        playSound('death');
                        showShadow('–î–ï–ü–†–ï–°–°–ò–Ø –£–®–õ–ê');
                    } else if (actionBtn2.innerText.includes('–ë–∏–Ω–≥—É—Å') && members.bingus.alive) {
                        addMessage('–¢—ã', '–ë–∏–Ω–≥—É—Å, –ø—Ä–æ—â–∞–π', true);
                        await typeMessage(1);
                        members.bingus.alive = false;
                        addSystemMessage('üò¢ –ë–ò–ù–ì–£–° –ú–Å–†–¢–í');
                        killed = true;
                        playSound('death');
                        showShadow('–°–ú–ï–†–¢–¨ –°–ù–û–í–ê');
                    } else if (actionBtn2.innerText.includes('–ü–æ–ø–∫—ç—Ç') && members.popcat.alive) {
                        addMessage('–¢—ã', '–ü–æ–ø–∫—ç—Ç, –ø—Ä–æ—â–∞–π', true);
                        await typeMessage(1);
                        members.popcat.alive = false;
                        addSystemMessage('üò∏ –ü–û–ü–ö–≠–¢ –ú–Å–†–¢–í');
                        killed = true;
                        playSound('death');
                        showShadow('–ì–û–õ–û–°–ê –ó–ê–¢–ò–•–õ–ò');
                    }
                }
                
                if (killed) {
                    updateMemberStatus();
                    saveGame();
                }
            }
            
            actionBtn1.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
            actionBtn2.innerText = '‚û°Ô∏è –î–∞–ª—å—à–µ';
            step = 2;
        }

        function killPopcat() {
            if (members.popcat.alive) {
                addMessage('–¢—ã', '–ü–æ–ø–∫—ç—Ç, –ø—Ä–æ—â–∞–π', true);
                members.popcat.alive = false;
                updateMemberStatus();
                addSystemMessage('üò∏ –ü–û–ü–ö–≠–¢ –ò–°–ß–ï–ó');
                playSound('death');
                showShadow('–ì–û–õ–û–°–ê –ó–ê–¢–ò–•–õ–ò');
                saveGame();
            }
        }

        // ===== –°–¢–ê–†–¢ =====
        window.onload = function() {
            if (!loadGame()) {
                startDay1();
            } else {
                if (day === 1) startDay1();
                else if (day === 2) day2();
                else if (day === 3) day3();
                else if (day === 4) day4();
                else if (day === 5) day5();
            }
            
            setInterval(() => {
                if (Math.random() > 0.95 && !humanShown) {
                    glitch(1);
                    showShadow('üëÅÔ∏è');
                }
                if (Math.random() > 0.98 && !humanShown) {
                    document.body.classList.add('blood-mode');
                    setTimeout(() => document.body.classList.remove('blood-mode'), 2000);
                }
            }, 10000);
        };
    </script>
</body>
</html>